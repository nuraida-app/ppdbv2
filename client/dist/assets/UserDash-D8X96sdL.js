import{a8 as S,r as u,j as a,S as I,R as g,C as r,a as l,b as P}from"./index-SdyenZBj.js";import{U as f,R as v,a as R}from"./UserLayout-BLsYv3lT.js";import{S as o,R as $}from"./index-xruJI7XH.js";import{F as j}from"./index-CGTd2lSn.js";import{T as k}from"./index-DpQ2ngIW.js";import{F as q}from"./Table-QYk9yYCf.js";import"./Pagination-DLTfRyt6.js";import"./DownOutlined-CkDp9OXZ.js";import"./index-BzU5bZ9-.js";const J=()=>{var p,c,h;const[_]=S(),[b,m]=u.useState(!0),[s,y]=u.useState({pendaftar:null,alamat:null,asal_sekolah:null,pembayaran:null,jadwal:[],progress:0});u.useEffect(()=>{D()},[]);const D=async()=>{try{m(!0);const e=await _().unwrap();y(e)}catch(e){console.error("Error fetching dashboard data:",e)}finally{m(!1)}},w=[{title:"Kegiatan",dataIndex:"kegiatan",key:"kegiatan"},{title:"Waktu",dataIndex:"waktu",key:"waktu",render:e=>new Date(e).toLocaleString("id-ID")},{title:"Mode",dataIndex:"mode",key:"mode"},{title:"Status",dataIndex:"status",key:"status",render:(e,i)=>{const d=new Date,t=new Date(i.waktu);let n="Belum Dimulai",x="blue";return d>t&&(n="Selesai",x="green"),a.jsx(k,{color:x,children:n})}}],F=()=>{var i;const e=[];if(s.pendaftar){const t=["nama","nisn","no_kk","nik","no_akta","tempat_lahir","tanggal_lahir","kelamin","agama","anak_ke","jml_saudara","tinggi","berat","kepala","ayah_nik","ayah_nama","ayah_tempat_lahir","ayah_tanggal_lahir","ayah_pendidikan","ayah_pekerjaan","ayah_no_tlp","ibu_nik","ibu_nama","ibu_tempat_lahir","ibu_tanggal_lahir","ibu_pendidikan","ibu_pekerjaan","ibu_no_tlp"].filter(n=>!s.pendaftar[n]);t.length===0?e.push({status:"success",message:"Data pendaftar lengkap"}):e.push({status:"warning",message:`Data pendaftar belum lengkap (${t.length} field kosong)`})}else e.push({status:"error",message:"Data pendaftar belum diisi"});if(s.alamat){const t=["provinsi","kota","kecamatan","desa","alamat","kode_pos","jarak","transportasi"].filter(n=>!s.alamat[n]);t.length===0?e.push({status:"success",message:"Data alamat lengkap"}):e.push({status:"warning",message:`Data alamat belum lengkap (${t.length} field kosong)`})}else e.push({status:"error",message:"Data alamat belum diisi"});if(s.asal_sekolah){const t=["npsn","nama","provinsi","kota","kecamatan","desa"].filter(n=>!s.asal_sekolah[n]);t.length===0?e.push({status:"success",message:"Data sekolah asal lengkap"}):e.push({status:"warning",message:`Data sekolah asal belum lengkap (${t.length} field kosong)`})}else e.push({status:"error",message:"Data sekolah asal belum diisi"});return(i=s.pembayaran)!=null&&i.ket?e.push({status:"success",message:"Pembayaran sudah lunas"}):e.push({status:"error",message:"Pembayaran belum lunas"}),e};return b?a.jsx(f,{children:a.jsx("div",{style:{textAlign:"center",padding:"50px"},children:a.jsx(I,{size:"large"})})}):a.jsxs(f,{title:"Dashboard",children:[a.jsxs(g,{gutter:[16,16],children:[a.jsx(r,{xs:24,sm:12,lg:6,children:a.jsx(l,{children:a.jsx(o,{title:"Status Pendaftaran",value:((p=s.pendaftar)==null?void 0:p.status_pendaftaran)||"Belum Mendaftar",prefix:a.jsx(P,{})})})}),a.jsx(r,{xs:24,sm:12,lg:6,children:a.jsx(l,{children:a.jsx(o,{title:"Kode Pendaftaran",value:((c=s.pendaftar)==null?void 0:c.kode_pendaftaran)||"-",prefix:a.jsx(v,{})})})}),a.jsx(r,{xs:24,sm:12,lg:6,children:a.jsx(l,{children:a.jsx(o,{title:"Status Pembayaran",value:(h=s.pembayaran)!=null&&h.ket?"Lunas":"Belum Lunas",prefix:a.jsx(R,{})})})}),a.jsx(r,{xs:24,sm:12,lg:6,children:a.jsx(l,{children:a.jsx(o,{title:"Progress Pendaftaran",value:`${s.progress}%`,prefix:a.jsx($,{})})})})]}),a.jsxs(g,{gutter:[16,16],style:{marginTop:16},children:[a.jsx(r,{xs:24,lg:12,children:a.jsx(l,{title:"Informasi Pendaftar",children:a.jsx(j,{gap:8,vertical:!0,children:s.pendaftar?a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Nama:"})," ",s.pendaftar.nama]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Jenjang:"})," ",s.pendaftar.jenjang_nama]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Sekolah:"})," ",s.pendaftar.sekolah_nama]}),a.jsxs("p",{children:[a.jsx("strong",{children:"NISN:"})," ",s.pendaftar.nisn]})]}):a.jsx("p",{children:"Belum ada data pendaftaran"})})})}),a.jsx(r,{xs:24,lg:12,children:a.jsx(l,{title:"Detail Progress Pendaftaran",children:a.jsx(j,{gap:8,vertical:!0,children:F().map((e,i)=>a.jsx("p",{children:a.jsx(k,{color:e.status==="success"?"green":e.status==="warning"?"orange":"red",children:e.message})},i))})})})]}),a.jsx(g,{gutter:[16,16],style:{marginTop:16},children:a.jsx(r,{xs:24,children:a.jsx(l,{title:"Jadwal Kegiatan",children:a.jsx(q,{dataSource:s.jadwal,columns:w,pagination:!1,rowKey:"id"})})})})]})};export{J as default};
