import{r as s,aa as he,ab as ve,ac as je,aj as ye,ak as Se,al as ae,am as be,an as Ce,ao as Pe,ap as ne,ae as H,aq as ze,ar as we,ai as Ee,g as Ne,_ as Oe,a1 as Re,F as C,a2 as $e,j as e,R as U,C as T,a as q,b as X,T as Ie,I as B,a3 as Te,a4 as J,B as ee,s as te}from"./index-4d5g1BaK.js";import{U as Le}from"./UserLayout-C3ecEh8u.js";import{P as Fe}from"./index-DaAj3bd4.js";import{T as se}from"./index-CLgY5FlP.js";import{D as ke}from"./index-C_fxbxzJ.js";import{R as Me}from"./CalendarOutlined-CunE1jvP.js";import{R as Ae}from"./PhoneOutlined-C5YWS4L6.js";import{S as Be}from"./index-BbFLOugA.js";const Q=s.createContext({}),_e=t=>{const{antCls:a,componentCls:n,iconCls:r,avatarBg:i,avatarColor:m,containerSize:j,containerSizeLG:u,containerSizeSM:c,textFontSize:f,textFontSizeLG:d,textFontSizeSM:L,borderRadius:F,borderRadiusLG:y,borderRadiusSM:O,lineWidth:S,lineType:P}=t,z=(o,b,w)=>({width:o,height:o,borderRadius:"50%",[`&${n}-square`]:{borderRadius:w},[`&${n}-icon`]:{fontSize:b,[`> ${r}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},je(t)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:m,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:i,border:`${ye(S)} ${P} transparent`,"&-image":{background:"transparent"},[`${a}-image-img`]:{display:"block"}}),z(j,f,F)),{"&-lg":Object.assign({},z(u,d,y)),"&-sm":Object.assign({},z(c,L,O)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Ge=t=>{const{componentCls:a,groupBorderColor:n,groupOverlapping:r,groupSpace:i}=t;return{[`${a}-group`]:{display:"inline-flex",[a]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:r}},[`${a}-group-popover`]:{[`${a} + ${a}`]:{marginInlineStart:i}}}},Ve=t=>{const{controlHeight:a,controlHeightLG:n,controlHeightSM:r,fontSize:i,fontSizeLG:m,fontSizeXL:j,fontSizeHeading3:u,marginXS:c,marginXXS:f,colorBorderBg:d}=t;return{containerSize:a,containerSizeLG:n,containerSizeSM:r,textFontSize:Math.round((m+j)/2),textFontSizeLG:u,textFontSizeSM:i,groupSpace:f,groupOverlapping:-c,groupBorderColor:d}},oe=he("Avatar",t=>{const{colorTextLightSolid:a,colorTextPlaceholder:n}=t,r=ve(t,{avatarBg:n,avatarColor:a});return[_e(r),Ge(r)]},Ve);var He=function(t,a){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&a.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)a.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ie=s.forwardRef((t,a)=>{const{prefixCls:n,shape:r,size:i,src:m,srcSet:j,icon:u,className:c,rootClassName:f,style:d,alt:L,draggable:F,children:y,crossOrigin:O,gap:S=4,onError:P}=t,z=He(t,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","style","alt","draggable","children","crossOrigin","gap","onError"]),[o,b]=s.useState(1),[w,_]=s.useState(!1),[k,G]=s.useState(!0),M=s.useRef(null),E=s.useRef(null),R=Se(a,M),{getPrefixCls:N,avatar:h}=s.useContext(ae),x=s.useContext(Q),$=()=>{if(!E.current||!M.current)return;const p=E.current.offsetWidth,l=M.current.offsetWidth;p!==0&&l!==0&&S*2<l&&b(l-S*2<p?(l-S*2)/p:1)};s.useEffect(()=>{_(!0)},[]),s.useEffect(()=>{G(!0),b(1)},[m]),s.useEffect($,[S]);const W=()=>{(P==null?void 0:P())!==!1&&G(!1)},g=be(p=>{var l,A;return(A=(l=i??(x==null?void 0:x.size))!==null&&l!==void 0?l:p)!==null&&A!==void 0?A:"default"}),D=Object.keys(typeof g=="object"?g||{}:{}).some(p=>["xs","sm","md","lg","xl","xxl"].includes(p)),V=Ce(D),ce=s.useMemo(()=>{if(typeof g!="object")return{};const p=Pe.find(A=>V[A]),l=g[p];return l?{width:l,height:l,fontSize:l&&(u||y)?l/2:18}:{}},[V,g]),v=N("avatar",n),Y=ne(v),[de,me,ue]=oe(v,Y),pe=H({[`${v}-lg`]:g==="large",[`${v}-sm`]:g==="small"}),Z=s.isValidElement(m),ge=r||(x==null?void 0:x.shape)||"circle",fe=H(v,pe,h==null?void 0:h.className,`${v}-${ge}`,{[`${v}-image`]:Z||m&&k,[`${v}-icon`]:!!u},ue,Y,c,f,me),xe=typeof g=="number"?{width:g,height:g,fontSize:u?g/2:18}:{};let I;if(typeof m=="string"&&k)I=s.createElement("img",{src:m,draggable:F,srcSet:j,onError:W,alt:L,crossOrigin:O});else if(Z)I=m;else if(u)I=u;else if(w||o!==1){const p=`scale(${o})`,l={msTransform:p,WebkitTransform:p,transform:p};I=s.createElement(ze,{onResize:$},s.createElement("span",{className:`${v}-string`,ref:E,style:Object.assign({},l)},y))}else I=s.createElement("span",{className:`${v}-string`,style:{opacity:0},ref:E},y);return de(s.createElement("span",Object.assign({},z,{style:Object.assign(Object.assign(Object.assign(Object.assign({},xe),ce),h==null?void 0:h.style),d),className:fe,ref:R}),I))}),re=t=>{const{size:a,shape:n}=s.useContext(Q),r=s.useMemo(()=>({size:t.size||a,shape:t.shape||n}),[t.size,t.shape,a,n]);return s.createElement(Q.Provider,{value:r},t.children)},We=t=>{var a,n,r,i;const{getPrefixCls:m,direction:j}=s.useContext(ae),{prefixCls:u,className:c,rootClassName:f,style:d,maxCount:L,maxStyle:F,size:y,shape:O,maxPopoverPlacement:S,maxPopoverTrigger:P,children:z,max:o}=t,b=m("avatar",u),w=`${b}-group`,_=ne(b),[k,G,M]=oe(b,_),E=H(w,{[`${w}-rtl`]:j==="rtl"},M,_,c,f,G),R=we(z).map((x,$)=>Ee(x,{key:`avatar-key-${$}`})),N=(o==null?void 0:o.count)||L,h=R.length;if(N&&N<h){const x=R.slice(0,N),$=R.slice(N,h),W=(o==null?void 0:o.style)||F,g=((a=o==null?void 0:o.popover)===null||a===void 0?void 0:a.trigger)||P||"hover",D=((n=o==null?void 0:o.popover)===null||n===void 0?void 0:n.placement)||S||"top",V=Object.assign(Object.assign({content:$},o==null?void 0:o.popover),{classNames:{root:H(`${w}-popover`,(i=(r=o==null?void 0:o.popover)===null||r===void 0?void 0:r.classNames)===null||i===void 0?void 0:i.root)},placement:D,trigger:g});return x.push(s.createElement(Fe,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},V),s.createElement(ie,{style:W},`+${h-N}`))),k(s.createElement(re,{shape:O,size:y},s.createElement("div",{className:E,style:d},x)))}return k(s.createElement(re,{shape:O,size:y},s.createElement("div",{className:E,style:d},R)))},le=ie;le.Group=We;var De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"},Ue=function(a,n){return s.createElement(Ne,Oe({},a,{ref:n,icon:De}))},qe=s.forwardRef(Ue);const{Title:Xe,Text:K}=Ie,rt=()=>{var u;const{user:t}=Re(c=>c.auth),[a]=C.useForm(),[n]=$e(),[r,i]=s.useState(!1),m=async c=>{var f;try{i(!0);const d=await n(c).unwrap();te.success(d.message)}catch(d){te.error(((f=d.data)==null?void 0:f.message)||"Failed to update profile")}finally{i(!1)}},j=c=>new Date(c).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"});return e.jsx(Le,{children:e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsxs(U,{gutter:[24,24],children:[e.jsx(T,{xs:24,md:8,children:e.jsx(q,{className:"shadow-lg h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(le,{size:100,icon:e.jsx(X,{}),className:"mb-4"}),e.jsx(Xe,{level:3,children:t==null?void 0:t.nama}),e.jsx(se,{color:"blue",className:"mb-4",children:(u=t==null?void 0:t.peran)==null?void 0:u.toUpperCase()}),e.jsx(ke,{}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs(K,{type:"secondary",children:[e.jsx(Me,{className:"mr-2"}),"Registered since"]}),e.jsx("br",{}),e.jsx(K,{strong:!0,children:j(t==null?void 0:t.createdat)})]}),e.jsxs("div",{children:[e.jsxs(K,{type:"secondary",children:[e.jsx(qe,{className:"mr-2"}),"Account Status"]}),e.jsx("br",{}),e.jsx(se,{color:"success",children:"Active"})]})]})]})})}),e.jsx(T,{xs:24,md:16,children:e.jsx(q,{title:e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"mr-2"}),e.jsx("span",{children:"Edit Profile"})]}),className:"shadow-lg",children:e.jsxs(C,{form:a,layout:"vertical",initialValues:{nama:t==null?void 0:t.nama,email:t==null?void 0:t.email,tlp:t==null?void 0:t.tlp},onFinish:m,children:[e.jsxs(U,{gutter:16,children:[e.jsx(T,{xs:24,md:12,children:e.jsx(C.Item,{name:"nama",label:"Full Name",rules:[{required:!0,message:"Please input your name!"}],children:e.jsx(B,{prefix:e.jsx(X,{}),placeholder:"Enter your full name"})})}),e.jsx(T,{xs:24,md:12,children:e.jsx(C.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Please input your email!"},{type:"email",message:"Please enter a valid email!"}],children:e.jsx(B,{prefix:e.jsx(Te,{}),placeholder:"Enter your email"})})})]}),e.jsx(C.Item,{name:"tlp",label:"Phone Number",rules:[{required:!0,message:"Please input your phone number!"}],children:e.jsx(B,{prefix:e.jsx(Ae,{}),placeholder:"Enter your phone number"})}),e.jsx(q,{title:e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"mr-2"}),e.jsx("span",{children:"Change Password"})]}),className:"mt-6 bg-gray-50",children:e.jsxs(U,{gutter:16,children:[e.jsx(T,{xs:24,md:12,children:e.jsx(C.Item,{name:"oldPassword",label:"Current Password",children:e.jsx(B.Password,{prefix:e.jsx(J,{}),placeholder:"Enter current password"})})}),e.jsx(T,{xs:24,md:12,children:e.jsx(C.Item,{name:"newPassword",label:"New Password",dependencies:["oldPassword"],rules:[({getFieldValue:c})=>({validator(f,d){return!c("oldPassword")||!d?Promise.resolve():d.length<6?Promise.reject(new Error("Password must be at least 6 characters!")):Promise.resolve()}})],children:e.jsx(B.Password,{prefix:e.jsx(J,{}),placeholder:"Enter new password"})})})]})}),e.jsx(C.Item,{style:{marginTop:16,textAlign:"right"},children:e.jsxs(Be,{children:[e.jsx(ee,{type:"primary",htmlType:"submit",loading:r,children:"Update Profile"}),e.jsx(ee,{onClick:()=>a.resetFields(),children:"Reset"})]})})]})})})]})})})};export{rt as default};
