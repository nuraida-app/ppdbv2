import{ag as A,ah as C,M as i,r as o,j as e,S as M,a as g,T as j,I as f,B as l,s as h}from"./index-RHHBljLG.js";import{A as d}from"./AdminLayout-CiY23PjN.js";import{S as x,I as T}from"./index-3dm-DB3h.js";import{U as W,R as E}from"./index-B4MGcRrq.js";import"./CalendarOutlined-BVNSOuCo.js";import"./DeleteOutlined-D8i8376n.js";const{TextArea:R}=f,{Title:G}=j,q=()=>{var p;const{data:s,isLoading:b,isError:y,error:n}=A(),[k]=C(),[r]=i.useForm(),[S,c]=o.useState(!1),[m,w]=o.useState(null);o.useEffect(()=>{s&&r.setFieldsValue({nama:s.nama,deskripsi:s.deskripsi})},[s,r]);const I=async t=>{var u;try{c(!0);const a=new FormData;a.append("nama",t.nama),a.append("deskripsi",t.deskripsi),m&&a.append("logo",m);const L=await k(a).unwrap();h.success(L.message||"Pengaturan berhasil diperbarui")}catch(a){h.error(((u=a.data)==null?void 0:u.message)||"Gagal memperbarui pengaturan")}finally{c(!1)}},F=t=>{t.file.status==="done"&&w(t.file.originFileObj)};return b?e.jsx(d,{children:e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(255, 255, 255, 0.8)"},children:e.jsx(M,{size:"large",children:e.jsx("div",{style:{padding:"50px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"4px"},children:"Memuat Aplikasi..."})})})}):y?e.jsx(d,{children:e.jsx(g,{children:e.jsxs(j.Text,{type:"danger",children:["Error: ",((p=n==null?void 0:n.data)==null?void 0:p.message)||"Gagal memuat pengaturan"]})})}):e.jsx(d,{children:e.jsx(g,{title:"Pengaturan Website",style:{maxWidth:800,margin:"0 auto"},children:e.jsxs(i,{form:r,layout:"vertical",onFinish:I,children:[e.jsx(i.Item,{name:"nama",label:"Nama Website",rules:[{required:!0,message:"Nama website harus diisi"}],children:e.jsx(f,{placeholder:"Masukkan nama website"})}),e.jsx(i.Item,{name:"deskripsi",label:"Deskripsi",rules:[{required:!0,message:"Deskripsi harus diisi"}],children:e.jsx(R,{rows:4,placeholder:"Masukkan deskripsi website"})}),e.jsx(i.Item,{label:"Logo Website",children:e.jsxs(x,{direction:"horizontal",size:"large",style:{width:"100%"},children:[e.jsx(W,{accept:"image/*",maxCount:1,beforeUpload:()=>!1,onChange:F,showUploadList:!1,children:e.jsx(l,{icon:e.jsx(E,{}),children:"Pilih Logo Baru"})}),(s==null?void 0:s.logo)&&e.jsx("div",{children:e.jsx(T,{src:s.logo,alt:"Logo Website",style:{maxWidth:200,maxHeight:200},preview:!1})})]})}),e.jsx(i.Item,{style:{textAlign:"right"},children:e.jsxs(x,{children:[e.jsx(l,{type:"primary",htmlType:"submit",loading:S,children:"Simpan Perubahan"}),e.jsx(l,{onClick:()=>r.resetFields(),children:"Reset"})]})})]})})})};export{q as default};
