import{M as r,r as c,a1 as D,a2 as O,a3 as R,j as e,I as h,B as p,V as K,N as k,O as V,s as d}from"./index-RHHBljLG.js";import{A as _}from"./AdminLayout-CiY23PjN.js";import{E as $}from"./Editor-CyFldvQs.js";import{S as j}from"./index-3dm-DB3h.js";import{F as q}from"./Table-BE48RBVr.js";import{S as I}from"./Pagination-B7GxbH25.js";import{R as B}from"./DeleteOutlined-D8i8376n.js";import"./CalendarOutlined-BVNSOuCo.js";import"./DownOutlined-CJiERgwC.js";import"./index-BOXVYCkk.js";const{Option:y}=I,Z=()=>{const[t]=r.useForm(),[S,m]=c.useState(!1),[b,F]=c.useState(""),[l,u]=c.useState(null),[s,g]=c.useState({current:1,pageSize:10}),{data:n,isLoading:T,refetch:x}=D({page:s.current,limit:s.pageSize,search:b}),[v]=O(),[w]=R(),C=a=>{g(a)},M=a=>{F(a),g({...s,current:1})},f=(a=null)=>{u(a),a?t.setFieldsValue({id:a.id,title:a.judul,category:a.kategori,value:a.teks}):t.resetFields(),m(!0)},E=()=>{m(!1),u(null),t.resetFields()},P=async()=>{try{const a=await t.validateFields();await v(a),d.success(`Informasi berhasil ${l?"diperbarui":"ditambahkan"}`),m(!1),u(null),t.resetFields(),x()}catch{d.error(`Gagal ${l?"memperbarui":"menambahkan"} informasi`)}},A=async a=>{k.confirm({title:"Apakah anda yakin ingin menghapus informasi ini?",content:"Data informasi akan dihapus secara permanen",okText:"Ya",cancelText:"Tidak",onOk:async()=>{var i;try{const o=await w(a);d.success(o.message),x()}catch(o){d.error(((i=o.data)==null?void 0:i.message)||"Gagal menghapus informasi")}}})},z=[{title:"No",key:"no",render:(a,i,o)=>(s.current-1)*s.pageSize+o+1},{title:"Judul",dataIndex:"judul",key:"judul"},{title:"Kategori",dataIndex:"kategori",key:"kategori"},{title:"Action",key:"action",render:(a,i)=>e.jsxs(j,{size:"middle",children:[e.jsx(p,{type:"primary",icon:e.jsx(V,{}),onClick:()=>f(i),children:"Edit"}),e.jsx(p,{type:"primary",danger:!0,icon:e.jsx(B,{}),onClick:()=>A(i.id),children:"Delete"})]})}];return e.jsxs(_,{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(j,{children:[e.jsx(h.Search,{placeholder:"Cari informasi",onSearch:M,style:{width:200}}),e.jsx(p,{type:"primary",icon:e.jsx(K,{}),onClick:()=>f(),children:"Tambah Informasi"})]})}),e.jsx(q,{columns:z,dataSource:n==null?void 0:n.infos,rowKey:"id",pagination:{...s,total:(n==null?void 0:n.totalPages)*s.pageSize},loading:T,onChange:C}),e.jsx(k,{title:l?"Edit Informasi":"Tambah Informasi",open:S,onOk:P,onCancel:E,width:800,children:e.jsxs(r,{form:t,layout:"vertical",children:[l&&e.jsx(r.Item,{name:"id",label:"ID",children:e.jsx(h,{disabled:!0})}),e.jsx(r.Item,{name:"title",label:"Judul",rules:[{required:!0,message:"Silakan masukkan judul!"}],children:e.jsx(h,{})}),e.jsx(r.Item,{name:"category",label:"Kategori",rules:[{required:!0,message:"Silakan pilih kategori!"}],children:e.jsxs(I,{placeholder:"Pilih kategori",children:[e.jsx(y,{value:"Pembayaran",children:"Pembayaran"}),e.jsx(y,{value:"Pengumuman",children:"Pengumuman"})]})}),e.jsx(r.Item,{name:"value",label:"Konten",rules:[{required:!0,message:"Silakan masukkan konten!"}],children:e.jsx($,{})})]})})]})};export{Z as default};
