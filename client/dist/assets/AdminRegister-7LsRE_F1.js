import{c as A,r as s,d as L,e as M,f as P,s as u,j as a,a as N,T as z,I as F}from"./index-4d5g1BaK.js";import{A as G}from"./AdminLayout-COybAYRu.js";import{S as x}from"./index-BbFLOugA.js";import{S as c}from"./index-sxBtqBPa.js";import{F as B}from"./Table-Ba6HjrdG.js";import{T as K}from"./index-CLgY5FlP.js";import"./CalendarOutlined-CunE1jvP.js";import"./index-Hv3UHrZV.js";import"./Pagination--wBnr7Wj.js";const{Title:R,Text:$}=z,{Search:J}=F,Z=()=>{const y=A(),[p,j]=s.useState(null),[m,D]=s.useState(null),[v,k]=s.useState(""),[h,n]=s.useState(1),[i]=s.useState(10),{data:r,isLoading:C,error:l}=L({status:p,page:h,limit:i,search:v,level:m}),[f,{data:o}]=M(),[w,{isSuccess:g,error:d,data:S}]=P();s.useEffect(()=>{l&&(console.error("Error fetching data:",l),u.error("Gagal memuat data pendaftar"))},[l]);const b=e=>{j(e),n(1)},_=e=>{k(e),n(1)},I=async(e,t)=>{e==="detail"?y(`/admin-pendaftar/${t.userid}`):await w({id:t.userid,status:e})};s.useEffect(()=>{g&&u.success(S.message),d&&u.error(d.data.message)},[g,S,d]),s.useEffect(()=>{f({page:"",limit:"",search:""})},[f]);const E=[{title:"Kode Pendaftaran",dataIndex:"kode_pendaftaran",key:"kode_pendaftaran"},{title:"Nama",dataIndex:"nama",key:"nama",render:e=>e||a.jsx($,{type:"danger",children:"Belum mengisi formulir"})},{title:"NISN",dataIndex:"nisn",key:"nisn"},{title:"Whatsapp",dataIndex:"tlp_user",key:"tlp_user",render:e=>a.jsx("a",{href:`https://wa.me/${e}`,target:"_blank",rel:"noopener noreferrer",children:e})},{title:"Status",dataIndex:"status_pendaftaran",key:"status_pendaftaran",render:e=>{let t="default";return e==="Diterima"?t="success":e==="Ditolak"?t="error":e==="Diproses"&&(t="processing"),a.jsx(K,{color:t,children:e.toUpperCase()})}},{title:"Aksi",key:"action",render:(e,t)=>a.jsx(c,{value:t.status_pendaftaran,style:{width:120},onChange:T=>I(T,t),options:[{value:"Diproses",label:"Diproses"},{value:"Diterima",label:"Diterima"},{value:"Ditolak",label:"Ditolak"},{value:"detail",label:"Detail"}]})}];return a.jsx(G,{title:"Manajemen Pendaftaran",children:a.jsx(x,{direction:"vertical",size:"large",style:{width:"100%"},children:a.jsxs(N,{children:[a.jsx(R,{level:4,children:"Manajemen Pendaftaran"}),a.jsxs(x,{size:"middle",style:{marginBottom:16},children:[a.jsx(c,{value:p,onChange:b,style:{width:120},placeholder:"Status",allowClear:!0,options:[{value:"Diproses",label:"Diproses"},{value:"Diterima",label:"Diterima"},{value:"Ditolak",label:"Ditolak"}]}),a.jsx(c,{value:m,onChange:e=>D(e),style:{width:120},placeholder:"Jenjang",allowClear:!0,options:o==null?void 0:o.map(e=>({value:e.id,label:e.nama}))}),a.jsx(J,{placeholder:"Cari pendaftar...",allowClear:!0,onSearch:_,style:{width:200}})]}),a.jsx(B,{columns:E,dataSource:r==null?void 0:r.users,loading:C,rowKey:"id",pagination:{current:h,pageSize:i,total:(r==null?void 0:r.totalPages)*i,onChange:e=>n(e)}})]})})})};export{Z as default};
