import{M as r,r as c,a4 as D,a5 as E,a6 as O,j as e,I as k,B as h,V as _,N as S,O as R,s as d}from"./index-RHHBljLG.js";import{A as V}from"./AdminLayout-CiY23PjN.js";import{E as $}from"./Editor-CyFldvQs.js";import{S as f}from"./index-3dm-DB3h.js";import{F as B}from"./Table-BE48RBVr.js";import{S as g}from"./Pagination-B7GxbH25.js";import{R as G}from"./DeleteOutlined-D8i8376n.js";import"./CalendarOutlined-BVNSOuCo.js";import"./DownOutlined-CJiERgwC.js";import"./index-BOXVYCkk.js";const{Option:u}=g,K=n=>({__html:n}),ee=()=>{const[n]=r.useForm(),[b,p]=c.useState(!1),[I,P]=c.useState(""),[o,m]=c.useState(null),[s,x]=c.useState({current:1,pageSize:10}),{data:t,isLoading:T,refetch:y}=D({page:s.current,limit:s.pageSize,search:I}),[C]=E(),[M]=O(),v=a=>{x(a)},z=a=>{P(a),x({...s,current:1})},j=(a=null)=>{m(a),a?n.setFieldsValue({id:a.id,question:a.soal,type:a.jenis,input:a.pengisi}):n.resetFields(),p(!0)},F=()=>{p(!1),m(null),n.resetFields()},Q=async()=>{try{const a=await n.validateFields();await C(a),d.success(`Pertanyaan berhasil ${o?"diperbarui":"ditambahkan"}`),p(!1),m(null),n.resetFields(),y()}catch{d.error(`Gagal ${o?"memperbarui":"menambahkan"} pertanyaan`)}},w=async a=>{S.confirm({title:"Apakah anda yakin ingin menghapus pertanyaan ini?",content:"Data pertanyaan akan dihapus secara permanen",okText:"Ya",cancelText:"Tidak",onOk:async()=>{var i;try{const l=await M(a);d.success(l.message),y()}catch(l){d.error(((i=l.data)==null?void 0:i.message)||"Gagal menghapus pertanyaan")}}})},A=[{title:"No",key:"no",render:(a,i,l)=>(s.current-1)*s.pageSize+l+1},{title:"Pertanyaan",dataIndex:"soal",key:"soal",render:a=>e.jsx("div",{dangerouslySetInnerHTML:K(a)})},{title:"Jenis",dataIndex:"jenis",key:"jenis"},{title:"Pengisi",dataIndex:"pengisi",key:"pengisi",render:a=>a==="ortu"?"Orang Tua":"Calon Peserta Didik"},{title:"Action",key:"action",render:(a,i)=>e.jsxs(f,{size:"middle",children:[e.jsx(h,{type:"primary",icon:e.jsx(R,{}),onClick:()=>j(i),children:"Edit"}),e.jsx(h,{type:"primary",danger:!0,icon:e.jsx(G,{}),onClick:()=>w(i.id),children:"Delete"})]})}];return e.jsxs(V,{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(f,{children:[e.jsx(k.Search,{placeholder:"Cari pertanyaan",onSearch:z,style:{width:200}}),e.jsx(h,{type:"primary",icon:e.jsx(_,{}),onClick:()=>j(),children:"Tambah Pertanyaan"})]})}),e.jsx(B,{columns:A,dataSource:t==null?void 0:t.questions,rowKey:"id",pagination:{...s,total:(t==null?void 0:t.totalPages)*s.pageSize},loading:T,onChange:v}),e.jsx(S,{title:o?"Edit Pertanyaan":"Tambah Pertanyaan",open:b,onOk:Q,onCancel:F,width:800,children:e.jsxs(r,{form:n,layout:"vertical",children:[o&&e.jsx(r.Item,{name:"id",label:"ID",children:e.jsx(k,{disabled:!0})}),e.jsx(r.Item,{name:"type",label:"Jenis",rules:[{required:!0,message:"Silakan pilih jenis!"}],children:e.jsxs(g,{placeholder:"Pilih jenis",children:[e.jsx(u,{value:"Kuisioner",children:"Kuisioner"}),e.jsx(u,{value:"Angket",children:"Angket"})]})}),e.jsx(r.Item,{name:"input",label:"Pengisi",rules:[{required:!0,message:"Silakan pilih pengisi!"}],children:e.jsxs(g,{placeholder:"Pilih pengisi",children:[e.jsx(u,{value:"ortu",children:"Orang Tua"}),e.jsx(u,{value:"Calon Peserta Didik",children:"Calon Peserta Didik"})]})}),e.jsx(r.Item,{name:"question",label:"Pertanyaan",rules:[{required:!0,message:"Silakan masukkan pertanyaan!"}],children:e.jsx($,{})})]})})]})};export{ee as default};
