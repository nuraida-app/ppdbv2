import{t as F,v as b,w as M,r as p,F as d,j as e,B as l,M as x,I as P,x as A,s as i}from"./index-4d5g1BaK.js";import{A as h}from"./AdminLayout-COybAYRu.js";import{F as v}from"./Table-Ba6HjrdG.js";import{S as E}from"./index-BbFLOugA.js";import{R as S}from"./DeleteOutlined-B7KhcxHK.js";import"./CalendarOutlined-CunE1jvP.js";import"./index-sxBtqBPa.js";import"./index-Hv3UHrZV.js";import"./Pagination--wBnr7Wj.js";const K=()=>{const{data:y=[],isLoading:j}=F(),[g]=b(),[f]=M(),[k,c]=p.useState(!1),[r]=d.useForm(),[n,o]=p.useState(null),m=(s=null)=>{s?(r.setFieldsValue({name:s.tapel}),o(s.id)):(r.resetFields(),o(null)),c(!0)},u=()=>{c(!1),r.resetFields(),o(null)},T=async()=>{var s;try{const a=await r.validateFields(),t=await g({id:n,name:a.name}).unwrap();i.success(t.message),u()}catch(a){console.error("Error adding/updating period:",a),i.error(((s=a.data)==null?void 0:s.message)||"Terjadi kesalahan saat menyimpan data")}},I=s=>{x.confirm({title:"Konfirmasi Hapus",content:"Apakah Anda yakin ingin menghapus periode ini?",okText:"Ya",cancelText:"Tidak",onOk:async()=>{var a;try{const t=await f(s).unwrap();i.success(t.message)}catch(t){console.error("Error deleting period:",t),i.error(((a=t.data)==null?void 0:a.message)||"Terjadi kesalahan saat menghapus data")}}})},w=[{title:"No",dataIndex:"index",key:"index",render:(s,a,t)=>t+1},{title:"Periode",dataIndex:"tapel",key:"tapel"},{title:"Aksi",key:"action",render:(s,a)=>e.jsxs(E,{size:"middle",children:[e.jsx(l,{type:"primary",icon:e.jsx(A,{}),onClick:()=>m(a)}),e.jsx(l,{type:"primary",danger:!0,icon:e.jsx(S,{}),onClick:()=>I(a.id)})]})}];return j?e.jsx(h,{title:"Periode",children:e.jsx("div",{children:"Loading..."})}):e.jsxs(h,{title:"Periode",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(l,{type:"primary",onClick:()=>m(),children:"Tambah Periode"})}),e.jsx(v,{dataSource:y,columns:w,rowKey:"id",pagination:!1}),e.jsx(x,{title:n?"Edit Periode":"Tambah Periode",open:k,onOk:T,onCancel:u,okText:n?"Update":"Tambah",cancelText:"Batal",children:e.jsx(d,{form:r,layout:"vertical",children:e.jsx(d.Item,{name:"name",label:"Nama Periode",rules:[{required:!0,message:"Nama periode harus diisi"}],children:e.jsx(P,{})})})})]})};export{K as default};
