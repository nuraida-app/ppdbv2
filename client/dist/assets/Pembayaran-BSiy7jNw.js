import{j as e,a as c,T as y,B as o,F as s,r as j,R as d,C as m,I as p,s as b,a0 as g,bt as f,S as I}from"./index-DXH8-aom.js";import{U as x}from"./UserLayout-srLq0sL8.js";import{D as n,h as P}from"./html2pdf-BMIILXxM.js";import{F,I as v}from"./index-DIMzJkL2.js";import{D}from"./index-DRqTgO83.js";import{T}from"./index-BrN6qyXd.js";import{U as B,R as k}from"./index-CzvZg3G_.js";import"./DownOutlined-B9IIpr-u.js";import"./DeleteOutlined-OmZTE6aX.js";const{Title:C}=y,L=({data:a})=>{const i=()=>{const t=document.querySelector(".print-content"),l={margin:.5,filename:`Invoice-Pembayaran-${a.nama}.pdf`,image:{type:"png",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};P().set(l).from(t).save()};return e.jsxs(c,{children:[e.jsxs(F,{justify:"space-between",align:"center",children:[e.jsx(C,{level:4,style:{textAlign:"center",marginBottom:24},children:"Invoice Pembayaran"}),e.jsx(o,{type:"primary",onClick:i,children:"Download PDF"})]}),e.jsxs("div",{className:"print-content",children:[e.jsxs(n,{bordered:!0,column:1,children:[e.jsx(n.Item,{label:"Nama",children:a.nama}),e.jsx(n.Item,{label:"Email",children:a.email}),e.jsx(n.Item,{label:"Nomor Telepon",children:a.tlp}),e.jsxs(n.Item,{label:"Nominal",children:["Rp ",parseInt(a.nominal).toLocaleString("id-ID")]}),e.jsx(n.Item,{label:"Tanggal Pembayaran",children:new Date(a.tgl_bayar).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsx(D,{children:"Bukti Pembayaran"}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(v,{src:a.berkas,alt:"Bukti Pembayaran",style:{maxWidth:"100%",maxHeight:"400px"}})})]})]})},N=({user:a})=>{const[i]=s.useForm(),[t,l]=j.useState([]),u=r=>{console.log("Form values:",r),console.log("File:",t),b.success("Data pembayaran berhasil disimpan!")},h=r=>Array.isArray(r)?r:r==null?void 0:r.fileList;return e.jsx(c,{title:"Form Pembayaran",children:e.jsxs(s,{form:i,layout:"vertical",onFinish:u,initialValues:{nama:a==null?void 0:a.nama},children:[e.jsxs(d,{gutter:16,children:[e.jsx(m,{xs:24,md:12,children:e.jsx(s.Item,{name:"nama",label:"Nama Calon Siswa",rules:[{required:!0,message:"Nama harus diisi!"}],children:e.jsx(p,{disabled:!0})})}),e.jsx(m,{xs:24,md:12,children:e.jsx(s.Item,{name:"nominal",label:"Nominal Pembayaran",rules:[{required:!0,message:"Nominal harus diisi!"}],children:e.jsx(T,{style:{width:"100%"},formatter:r=>`Rp ${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>r.replace(/\Rp\s?|(,*)/g,"")})})})]}),e.jsxs(d,{gutter:16,children:[e.jsx(m,{xs:24,md:12,children:e.jsx(s.Item,{name:"media",label:"Media Pembayaran",rules:[{required:!0,message:"Media pembayaran harus diisi!"}],children:e.jsx(p,{placeholder:"Contoh: Transfer Bank BCA"})})}),e.jsx(m,{xs:24,md:12,children:e.jsx(s.Item,{name:"upload",label:"Upload Bukti Pembayaran",valuePropName:"fileList",getValueFromEvent:h,rules:[{required:!0,message:"Bukti pembayaran harus diupload!"}],children:e.jsx(B,{listType:"picture",maxCount:1,beforeUpload:()=>!1,onChange:({fileList:r})=>l(r),children:e.jsx(o,{icon:e.jsx(k,{}),children:"Upload Bukti Pembayaran"})})})})]}),e.jsx(s.Item,{children:e.jsx(o,{type:"primary",htmlType:"submit",children:"Simpan Pembayaran"})})]})})},$=()=>{const{user:a}=g(l=>l.auth),{data:i,isLoading:t}=f(a==null?void 0:a.id,{skip:!(a!=null&&a.id)});return t?e.jsx(x,{title:"Pembayaran",children:e.jsx(c,{children:e.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[e.jsx(I,{size:"large"}),e.jsx("p",{style:{marginTop:"20px"},children:"Loading payment data..."})]})})}):e.jsx(x,{title:"Pembayaran",children:i!=null&&i.ket?e.jsx(L,{data:i}):e.jsx(N,{user:a})})};export{$ as default};
