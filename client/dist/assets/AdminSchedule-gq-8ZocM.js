import{F as s,r as l,J as E,K as O,N as R,j as e,B as r,E as $,M as j,I as g,x as N,s as o}from"./index-4d5g1BaK.js";import{A as v}from"./AdminLayout-COybAYRu.js";import{F as B}from"./Table-Ba6HjrdG.js";import{S as h}from"./index-sxBtqBPa.js";import{T as P}from"./index-DhIZ6dew.js";import{S as y}from"./index-BbFLOugA.js";import{R as G}from"./DeleteOutlined-B7KhcxHK.js";import"./CalendarOutlined-CunE1jvP.js";import"./index-Hv3UHrZV.js";import"./Pagination--wBnr7Wj.js";const{Option:u}=h,ee=()=>{const[c]=s.useForm(),[k,n]=l.useState(!1),[d,p]=l.useState(null),[x,S]=l.useState(1),[m]=l.useState(10),[b,W]=l.useState(""),{data:i,isLoading:f}=E({page:x,limit:m,search:b}),[w]=O(),[I]=R(),J=()=>{p(null),c.resetFields(),n(!0)},M=a=>{p(a.id),c.setFieldsValue({time:a.waktu,type:a.jenis,name:a.kegiatan,mode:a.mode,quota:a.kuota}),n(!0)},T=async a=>{j.confirm({title:"Hapus Jadwal",content:"Apakah Anda yakin ingin menghapus jadwal ini?",okText:"Ya",cancelText:"Tidak",onOk:async()=>{try{await I(a).unwrap(),o.success("Jadwal berhasil dihapus")}catch{o.error("Gagal menghapus jadwal")}}})},A=async a=>{try{const t={id:d,time:a.time,type:a.type,name:a.name,mode:a.mode,quota:a.quota};await w(t).unwrap(),o.success(d?"Jadwal berhasil diperbarui":"Jadwal berhasil ditambahkan"),n(!1)}catch{o.error("Gagal menyimpan jadwal")}},F=[{title:"Waktu",dataIndex:"waktu",key:"waktu",render:a=>{const t=new Date(a),q=["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],K=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],C=q[t.getDay()],D=K[t.getMonth()];return`${C}, ${t.getDate()} ${D} ${t.getFullYear()}`}},{title:"Jenis",dataIndex:"jenis",key:"jenis"},{title:"Kegiatan",dataIndex:"kegiatan",key:"kegiatan"},{title:"Mode",dataIndex:"mode",key:"mode"},{title:"Kuota",dataIndex:"kuota",key:"kuota"},{title:"Aksi",key:"action",render:(a,t)=>e.jsxs(y,{children:[e.jsx(r,{type:"primary",icon:e.jsx(N,{}),onClick:()=>M(t),children:"Edit"}),e.jsx(r,{danger:!0,icon:e.jsx(G,{}),onClick:()=>T(t.id),children:"Hapus"})]})}];return e.jsx(v,{title:"Jadwal",children:e.jsxs("div",{style:{padding:"24px"},children:[e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx(r,{type:"primary",icon:e.jsx($,{}),onClick:J,children:"Tambah Jadwal"})}),e.jsx(B,{columns:F,dataSource:i==null?void 0:i.schedules,loading:f,rowKey:"id",pagination:{total:(i==null?void 0:i.totalPages)*m,pageSize:m,current:x,onChange:a=>S(a)}}),e.jsx(j,{title:d?"Edit Jadwal":"Tambah Jadwal",open:k,onCancel:()=>n(!1),footer:null,children:e.jsxs(s,{form:c,layout:"vertical",onFinish:A,children:[e.jsx(s.Item,{name:"time",label:"Waktu",rules:[{required:!0,message:"Waktu harus diisi"}],children:e.jsx(g,{type:"datetime-local"})}),e.jsx(s.Item,{name:"type",label:"Jenis",rules:[{required:!0,message:"Jenis harus diisi"}],children:e.jsxs(h,{placeholder:"Pilih jenis kegiatan",children:[e.jsx(u,{value:"test",children:"Test Tulis"}),e.jsx(u,{value:"mcu",children:"MCU"})]})}),e.jsx(s.Item,{name:"name",label:"Kegiatan",rules:[{required:!0,message:"Kegiatan harus diisi"}],children:e.jsx(g,{placeholder:"Masukkan kegiatan"})}),e.jsx(s.Item,{name:"mode",label:"Mode",rules:[{required:!0,message:"Mode harus diisi"}],children:e.jsxs(h,{placeholder:"Pilih mode",children:[e.jsx(u,{value:"offline",children:"Offline"}),e.jsx(u,{value:"online",children:"Online"})]})}),e.jsx(s.Item,{name:"quota",label:"Kuota",rules:[{required:!0,message:"Kuota harus diisi"}],children:e.jsx(P,{min:0,style:{width:"100%"}})}),e.jsx(s.Item,{children:e.jsxs(y,{children:[e.jsx(r,{type:"primary",htmlType:"submit",children:d?"Update":"Simpan"}),e.jsx(r,{onClick:()=>n(!1),children:"Batal"})]})})]})})]})})};export{ee as default};
