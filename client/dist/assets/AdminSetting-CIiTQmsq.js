import{a4 as W,a5 as P,F as t,r as o,j as e,S as A,a as g,T as j,I as f,B as l,s as h}from"./index-DXH8-aom.js";import{A as d}from"./AdminLayout-CmhUVznm.js";import{S as x,I as C}from"./index-DIMzJkL2.js";import{U as T,R as E}from"./index-CzvZg3G_.js";import"./CalendarOutlined-DmTqm3dq.js";import"./DeleteOutlined-OmZTE6aX.js";const{TextArea:M}=f,{Title:G}=j,q=()=>{var p;const{data:s,isLoading:b,isError:y,error:n}=W(),[k]=P(),[r]=t.useForm(),[S,c]=o.useState(!1),[m,w]=o.useState(null);o.useEffect(()=>{s&&r.setFieldsValue({nama:s.nama,deskripsi:s.deskripsi})},[s,r]);const F=async i=>{var u;try{c(!0);const a=new FormData;a.append("nama",i.nama),a.append("deskripsi",i.deskripsi),m&&a.append("logo",m);const L=await k(a).unwrap();h.success(L.message||"Pengaturan berhasil diperbarui")}catch(a){h.error(((u=a.data)==null?void 0:u.message)||"Gagal memperbarui pengaturan")}finally{c(!1)}},I=i=>{i.file.status==="done"&&w(i.file.originFileObj)};return b?e.jsx(d,{title:"Pengaturan Website",children:e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(255, 255, 255, 0.8)"},children:e.jsx(A,{size:"large",children:e.jsx("div",{style:{padding:"50px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"4px"},children:"Memuat Aplikasi..."})})})}):y?e.jsx(d,{title:"Pengaturan Website",children:e.jsx(g,{children:e.jsxs(j.Text,{type:"danger",children:["Error: ",((p=n==null?void 0:n.data)==null?void 0:p.message)||"Gagal memuat pengaturan"]})})}):e.jsx(d,{title:"Pengaturan Website",children:e.jsx(g,{title:"Pengaturan Website",style:{maxWidth:800,margin:"0 auto"},children:e.jsxs(t,{form:r,layout:"vertical",onFinish:F,children:[e.jsx(t.Item,{name:"nama",label:"Nama Website",rules:[{required:!0,message:"Nama website harus diisi"}],children:e.jsx(f,{placeholder:"Masukkan nama website"})}),e.jsx(t.Item,{name:"deskripsi",label:"Deskripsi",rules:[{required:!0,message:"Deskripsi harus diisi"}],children:e.jsx(M,{rows:4,placeholder:"Masukkan deskripsi website"})}),e.jsx(t.Item,{label:"Logo Website",children:e.jsxs(x,{direction:"horizontal",size:"large",style:{width:"100%"},children:[e.jsx(T,{accept:"image/*",maxCount:1,beforeUpload:()=>!1,onChange:I,showUploadList:!1,children:e.jsx(l,{icon:e.jsx(E,{}),children:"Pilih Logo Baru"})}),(s==null?void 0:s.logo)&&e.jsx("div",{children:e.jsx(C,{src:s.logo,alt:"Logo Website",style:{maxWidth:200,maxHeight:200},preview:!1})})]})}),e.jsx(t.Item,{style:{textAlign:"right"},children:e.jsxs(x,{children:[e.jsx(l,{type:"primary",htmlType:"submit",loading:S,children:"Simpan Perubahan"}),e.jsx(l,{onClick:()=>r.resetFields(),children:"Reset"})]})})]})})})};export{q as default};
