import{H as w,J as F,K as M,r as p,M as d,j as e,B as l,N as x,I as A,O as E,s as i}from"./index-RHHBljLG.js";import{A as h}from"./AdminLayout-CiY23PjN.js";import{F as P}from"./Table-BE48RBVr.js";import{S}from"./index-3dm-DB3h.js";import{R as Y}from"./DeleteOutlined-D8i8376n.js";import"./CalendarOutlined-BVNSOuCo.js";import"./Pagination-B7GxbH25.js";import"./DownOutlined-CJiERgwC.js";import"./index-BOXVYCkk.js";const V=()=>{const{data:y=[],isLoading:j}=w(),[g]=F(),[f]=M(),[k,c]=p.useState(!1),[r]=d.useForm(),[n,o]=p.useState(null),m=(s=null)=>{s?(r.setFieldsValue({name:s.tapel}),o(s.id)):(r.resetFields(),o(null)),c(!0)},u=()=>{c(!1),r.resetFields(),o(null)},T=async()=>{var s;try{const a=await r.validateFields(),t=await g({id:n,name:a.name}).unwrap();i.success(t.message),u()}catch(a){console.error("Error adding/updating period:",a),i.error(((s=a.data)==null?void 0:s.message)||"Terjadi kesalahan saat menyimpan data")}},I=s=>{x.confirm({title:"Konfirmasi Hapus",content:"Apakah Anda yakin ingin menghapus periode ini?",okText:"Ya",cancelText:"Tidak",onOk:async()=>{var a;try{const t=await f(s).unwrap();i.success(t.message)}catch(t){console.error("Error deleting period:",t),i.error(((a=t.data)==null?void 0:a.message)||"Terjadi kesalahan saat menghapus data")}}})},b=[{title:"No",dataIndex:"index",key:"index",render:(s,a,t)=>t+1},{title:"Periode",dataIndex:"tapel",key:"tapel"},{title:"Aksi",key:"action",render:(s,a)=>e.jsxs(S,{size:"middle",children:[e.jsx(l,{type:"primary",icon:e.jsx(E,{}),onClick:()=>m(a)}),e.jsx(l,{type:"primary",danger:!0,icon:e.jsx(Y,{}),onClick:()=>I(a.id)})]})}];return j?e.jsx(h,{children:e.jsx("div",{children:"Loading..."})}):e.jsxs(h,{children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(l,{type:"primary",onClick:()=>m(),children:"Tambah Periode"})}),e.jsx(P,{dataSource:y,columns:b,rowKey:"id",pagination:!1}),e.jsx(x,{title:n?"Edit Periode":"Tambah Periode",open:k,onOk:T,onCancel:u,okText:n?"Update":"Tambah",cancelText:"Batal",children:e.jsx(d,{form:r,layout:"vertical",children:e.jsx(d.Item,{name:"name",label:"Nama Periode",rules:[{required:!0,message:"Nama periode harus diisi"}],children:e.jsx(A,{})})})})]})};export{V as default};
