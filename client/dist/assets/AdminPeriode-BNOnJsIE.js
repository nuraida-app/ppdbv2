import{p as b,q as w,t as M,r as u,F as d,j as e,B as l,M as x,I as P,v as A,s as i}from"./index-DFhYK5kk.js";import{A as h}from"./AdminLayout-Dz_gGT81.js";import{F as v}from"./Table-DU_MYQyH.js";import{S as E}from"./index-XZ3BgNl5.js";import{R as S}from"./DeleteOutlined-UPub8vb9.js";import"./CalendarOutlined-DuJpBk8t.js";import"./index-CeB3Tv9c.js";import"./index-CNcq7aXJ.js";import"./Pagination-DnjppGGN.js";const D=()=>{const{data:y=[],isLoading:j}=b(),[g]=w(),[f]=M(),[k,c]=u.useState(!1),[r]=d.useForm(),[n,o]=u.useState(null),m=(s=null)=>{s?(r.setFieldsValue({name:s.tapel}),o(s.id)):(r.resetFields(),o(null)),c(!0)},p=()=>{c(!1),r.resetFields(),o(null)},T=async()=>{var s;try{const a=await r.validateFields(),t=await g({id:n,name:a.name}).unwrap();i.success(t.message),p()}catch(a){console.error("Error adding/updating period:",a),i.error(((s=a.data)==null?void 0:s.message)||"Terjadi kesalahan saat menyimpan data")}},I=s=>{x.confirm({title:"Konfirmasi Hapus",content:"Apakah Anda yakin ingin menghapus periode ini?",okText:"Ya",cancelText:"Tidak",onOk:async()=>{var a;try{const t=await f(s).unwrap();i.success(t.message)}catch(t){console.error("Error deleting period:",t),i.error(((a=t.data)==null?void 0:a.message)||"Terjadi kesalahan saat menghapus data")}}})},F=[{title:"No",dataIndex:"index",key:"index",render:(s,a,t)=>t+1},{title:"Periode",dataIndex:"tapel",key:"tapel"},{title:"Aksi",key:"action",render:(s,a)=>e.jsxs(E,{size:"middle",children:[e.jsx(l,{type:"primary",icon:e.jsx(A,{}),onClick:()=>m(a)}),e.jsx(l,{type:"primary",danger:!0,icon:e.jsx(S,{}),onClick:()=>I(a.id)})]})}];return j?e.jsx(h,{title:"Periode",children:e.jsx("div",{children:"Loading..."})}):e.jsxs(h,{title:"Periode",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(l,{type:"primary",onClick:()=>m(),children:"Tambah Periode"})}),e.jsx(v,{dataSource:y,columns:F,rowKey:"id",pagination:!1}),e.jsx(x,{title:n?"Edit Periode":"Tambah Periode",open:k,onOk:T,onCancel:p,okText:n?"Update":"Tambah",cancelText:"Batal",children:e.jsx(d,{form:r,layout:"vertical",children:e.jsx(d.Item,{name:"name",label:"Nama Periode",rules:[{required:!0,message:"Nama periode harus diisi"}],children:e.jsx(P,{})})})})]})};export{D as default};
