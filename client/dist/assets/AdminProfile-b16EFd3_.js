import{a0 as k,F as a,r as w,a1 as I,j as s,R as F,C as j,a as f,I as l,b as R,a2 as M,B as t,a3 as n,s as d,T as q}from"./index-DXH8-aom.js";import{A as E}from"./AdminLayout-CmhUVznm.js";import{R as S}from"./PhoneOutlined-C16j3goo.js";import{S as c}from"./index-DIMzJkL2.js";import"./CalendarOutlined-DmTqm3dq.js";const{Title:v}=q,B=()=>{const{user:e}=k(i=>i.auth),[p]=a.useForm(),[m]=a.useForm(),[P,h]=w.useState(!1),[g,u]=w.useState(!1),[x]=I(),y=async i=>{var o;try{h(!0);const r=await x(i).unwrap();d.success(r.message||"Profile berhasil diperbarui")}catch(r){d.error(((o=r.data)==null?void 0:o.message)||"Gagal memperbarui profile")}finally{h(!1)}},b=async i=>{var o;try{u(!0);const r=await x({nama:e==null?void 0:e.nama,email:e==null?void 0:e.email,tlp:e==null?void 0:e.tlp,oldPassword:i.oldPassword,newPassword:i.newPassword}).unwrap();d.success(r.message||"Password berhasil diperbarui"),m.resetFields()}catch(r){d.error(((o=r.data)==null?void 0:o.message)||"Gagal memperbarui password")}finally{u(!1)}};return s.jsx(E,{title:"Profile Admin",children:s.jsxs(F,{gutter:[24,24],style:{width:"100%",maxWidth:1200,margin:"0 auto"},children:[s.jsx(j,{xs:24,md:12,children:s.jsx(f,{title:"Profile Admin",style:{height:"100%"},children:s.jsxs(a,{form:p,layout:"vertical",initialValues:{nama:e==null?void 0:e.nama,email:e==null?void 0:e.email,tlp:e==null?void 0:e.tlp},onFinish:y,children:[s.jsx(a.Item,{name:"nama",label:"Nama",rules:[{required:!0,message:"Nama harus diisi"}],children:s.jsx(l,{prefix:s.jsx(R,{}),placeholder:"Masukkan nama"})}),s.jsx(a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Email harus diisi"},{type:"email",message:"Email tidak valid"}],children:s.jsx(l,{prefix:s.jsx(M,{}),placeholder:"Masukkan email"})}),s.jsx(a.Item,{name:"tlp",label:"Nomor Telepon",rules:[{required:!0,message:"Nomor telepon harus diisi"}],children:s.jsx(l,{prefix:s.jsx(S,{}),placeholder:"Masukkan nomor telepon"})}),s.jsx(a.Item,{children:s.jsxs(c,{children:[s.jsx(t,{type:"primary",htmlType:"submit",loading:P,children:"Simpan Perubahan"}),s.jsx(t,{onClick:()=>p.resetFields(),children:"Reset"})]})})]})})}),s.jsx(j,{xs:24,md:12,children:s.jsx(f,{title:s.jsxs(c,{children:[s.jsx(n,{}),s.jsx("span",{children:"Ubah Password"})]}),style:{height:"100%"},children:s.jsxs(a,{form:m,layout:"vertical",onFinish:b,children:[s.jsx(a.Item,{name:"oldPassword",label:"Password Lama",rules:[{required:!0,message:"Password lama harus diisi"}],children:s.jsx(l.Password,{prefix:s.jsx(n,{}),placeholder:"Masukkan password lama"})}),s.jsx(a.Item,{name:"newPassword",label:"Password Baru",rules:[{required:!0,message:"Password baru harus diisi"},{min:6,message:"Password minimal 6 karakter"}],children:s.jsx(l.Password,{prefix:s.jsx(n,{}),placeholder:"Masukkan password baru"})}),s.jsx(a.Item,{name:"confirmPassword",label:"Konfirmasi Password",dependencies:["newPassword"],rules:[{required:!0,message:"Konfirmasi password harus diisi"},({getFieldValue:i})=>({validator(o,r){return!r||i("newPassword")===r?Promise.resolve():Promise.reject(new Error("Password tidak cocok"))}})],children:s.jsx(l.Password,{prefix:s.jsx(n,{}),placeholder:"Konfirmasi password baru"})}),s.jsx(a.Item,{children:s.jsxs(c,{children:[s.jsx(t,{type:"primary",htmlType:"submit",loading:g,children:"Update Password"}),s.jsx(t,{onClick:()=>m.resetFields(),children:"Reset"})]})})]})})})]})})};export{B as default};
