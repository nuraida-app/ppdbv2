import{F as r,r as c,O as D,P as O,Q as R,j as e,I as h,B as p,E as K,M as k,x as _,s as d}from"./index-4d5g1BaK.js";import{A as $}from"./AdminLayout-COybAYRu.js";import{E as q}from"./Editor-C-781Bx7.js";import{S as j}from"./index-BbFLOugA.js";import{F as B}from"./Table-Ba6HjrdG.js";import{S as I}from"./index-sxBtqBPa.js";import{R as G}from"./DeleteOutlined-B7KhcxHK.js";import"./CalendarOutlined-CunE1jvP.js";import"./index-Hv3UHrZV.js";import"./Pagination--wBnr7Wj.js";const{Option:y}=I,Z=()=>{const[s]=r.useForm(),[S,m]=c.useState(!1),[b,F]=c.useState(""),[l,u]=c.useState(null),[t,g]=c.useState({current:1,pageSize:10}),{data:n,isLoading:T,refetch:x}=D({page:t.current,limit:t.pageSize,search:b}),[v]=O(),[w]=R(),C=a=>{g(a)},E=a=>{F(a),g({...t,current:1})},f=(a=null)=>{u(a),a?s.setFieldsValue({id:a.id,title:a.judul,category:a.kategori,value:a.teks}):s.resetFields(),m(!0)},M=()=>{m(!1),u(null),s.resetFields()},P=async()=>{try{const a=await s.validateFields();await v(a),d.success(`Informasi berhasil ${l?"diperbarui":"ditambahkan"}`),m(!1),u(null),s.resetFields(),x()}catch{d.error(`Gagal ${l?"memperbarui":"menambahkan"} informasi`)}},A=async a=>{k.confirm({title:"Apakah anda yakin ingin menghapus informasi ini?",content:"Data informasi akan dihapus secara permanen",okText:"Ya",cancelText:"Tidak",onOk:async()=>{var i;try{const o=await w(a);d.success(o.message),x()}catch(o){d.error(((i=o.data)==null?void 0:i.message)||"Gagal menghapus informasi")}}})},z=[{title:"No",key:"no",render:(a,i,o)=>(t.current-1)*t.pageSize+o+1},{title:"Judul",dataIndex:"judul",key:"judul"},{title:"Kategori",dataIndex:"kategori",key:"kategori"},{title:"Action",key:"action",render:(a,i)=>e.jsxs(j,{size:"middle",children:[e.jsx(p,{type:"primary",icon:e.jsx(_,{}),onClick:()=>f(i),children:"Edit"}),e.jsx(p,{type:"primary",danger:!0,icon:e.jsx(G,{}),onClick:()=>A(i.id),children:"Delete"})]})}];return e.jsxs($,{title:"Informasi",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(j,{children:[e.jsx(h.Search,{placeholder:"Cari informasi",onSearch:E,style:{width:200}}),e.jsx(p,{type:"primary",icon:e.jsx(K,{}),onClick:()=>f(),children:"Tambah Informasi"})]})}),e.jsx(B,{columns:z,dataSource:n==null?void 0:n.infos,rowKey:"id",pagination:{...t,total:(n==null?void 0:n.totalPages)*t.pageSize},loading:T,onChange:C}),e.jsx(k,{title:l?"Edit Informasi":"Tambah Informasi",open:S,onOk:P,onCancel:M,width:800,children:e.jsxs(r,{form:s,layout:"vertical",children:[l&&e.jsx(r.Item,{name:"id",label:"ID",children:e.jsx(h,{disabled:!0})}),e.jsx(r.Item,{name:"title",label:"Judul",rules:[{required:!0,message:"Silakan masukkan judul!"}],children:e.jsx(h,{})}),e.jsx(r.Item,{name:"category",label:"Kategori",rules:[{required:!0,message:"Silakan pilih kategori!"}],children:e.jsxs(I,{placeholder:"Pilih kategori",children:[e.jsx(y,{value:"Pembayaran",children:"Pembayaran"}),e.jsx(y,{value:"Pengumuman",children:"Pengumuman"})]})}),e.jsx(r.Item,{name:"value",label:"Konten",rules:[{required:!0,message:"Silakan masukkan konten!"}],children:e.jsx(q,{})})]})})]})};export{Z as default};
