import{r as D,e as w,_ as S,f as I,g as T,j as e,L,B as v,T as u,h as B,a as g,c as F,i as C}from"./index-SdyenZBj.js";import{A as f}from"./AdminLayout-DOMWrTsz.js";import{h as N,D as n}from"./html2pdf-CQL3wNbM.js";import{D as b}from"./index-BIw1Kwy4.js";import{S as j}from"./index-CGTd2lSn.js";import{L as R}from"./index-Dj19AJpp.js";import"./CalendarOutlined-Bo25vKob.js";import"./Pagination-DLTfRyt6.js";import"./DownOutlined-CkDp9OXZ.js";var E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},$=function(c,d){return D.createElement(w,S({},c,{ref:d,icon:E}))},K=D.forwardRef($);const{Title:x,Text:p}=u,J=()=>{const{userId:o}=I(),{data:c,isLoading:d}=T(o);if(console.log(c),d||!c)return e.jsx(L,{});const{formulir:t,address:a,school:i,documents:r}=c,s=r.find(h=>h.file_name==="Foto"),m=h=>new Date(h).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),l=({label:h,value:k})=>e.jsxs("div",{className:"label-value-row",style:{marginBottom:"4px"},children:[e.jsx(p,{style:{display:"inline-block",width:"140px"},children:h}),e.jsxs(p,{strong:!0,children:[": ",k]})]}),P=()=>{const h=document.querySelector(".print-content"),k={margin:.5,filename:`Formulir-Pendaftaran-${t.nama}.pdf`,image:{type:"png",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};N().set(k).from(h).save()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"no-print",style:{textAlign:"right",marginBottom:"20px"},children:e.jsx(v,{type:"primary",icon:e.jsx(K,{}),onClick:P,children:"Export ke PDF"})}),e.jsxs("div",{className:"print-content",style:{width:"100%",maxWidth:"210mm",margin:"0 auto",padding:"20px",background:"white"},children:[e.jsx("div",{style:{textAlign:"center",marginBottom:"8px",marginTop:0},children:e.jsx(x,{level:3,style:{marginBottom:30},children:"FORMULIR PENDAFTARAN PESERTA DIDIK BARU"})}),e.jsxs("div",{className:"section-content section-avoid-break",children:[e.jsx(x,{level:4,children:"A. DATA PENDAFTARAN"}),e.jsxs("div",{style:{paddingLeft:"20px"},children:[e.jsx(l,{label:"Kode Pendaftaran",value:t.kode_pendaftaran}),e.jsx(l,{label:"Status Pendaftaran",value:t.status_pendaftaran}),e.jsx(l,{label:"Sekolah",value:t.sekolah}),e.jsx(l,{label:"Jenjang",value:t.jenjang})]})]}),e.jsx(b,{}),e.jsxs(j,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsxs("div",{className:"section-content section-avoid-break",children:[e.jsx(x,{level:4,children:"B. DATA PRIBADI"}),e.jsxs("div",{style:{paddingLeft:"10px",display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx(l,{label:"Nama Lengkap",value:t.nama}),e.jsx(l,{label:"NISN",value:t.nisn}),e.jsx(l,{label:"NIK",value:t.nik}),e.jsx(l,{label:"No. KK",value:t.no_kk}),e.jsx(l,{label:"No. Akta",value:t.no_akta}),e.jsx(l,{label:"Tempat Lahir",value:t.tempat_lahir}),e.jsx(l,{label:"Tanggal Lahir",value:m(t.tanggal_lahir)}),e.jsx(l,{label:"Jenis Kelamin",value:t.kelamin==="m"?"Laki-laki":"Perempuan"}),e.jsx(l,{label:"Agama",value:t.agama}),e.jsx(l,{label:"Anak Ke",value:t.anak_ke}),e.jsx(l,{label:"Jumlah Saudara",value:t.jml_saudara}),e.jsx(l,{label:"Tinggi Badan",value:`${t.tinggi} cm`}),e.jsx(l,{label:"Berat Badan",value:`${t.berat} kg`}),e.jsx(l,{label:"Lingkar Kepala",value:`${t.kepala} cm`})]}),e.jsx("div",{style:{width:"2.5cm",height:"3.3cm",border:"1px solid #000",display:"flex",alignItems:"center",justifyContent:"center",background:"#fff",marginTop:"4px"},children:s?e.jsx("img",{src:s.file_link,alt:"Foto Siswa",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(p,{type:"secondary",children:"Foto 3x4"}),e.jsx(p,{type:"secondary",style:{fontSize:"12px"},children:"(3x4 cm)"})]})})]})]}),e.jsx(b,{}),e.jsxs("div",{className:"section-content section-avoid-break",children:[e.jsx(x,{level:4,children:"C. DATA ORANG TUA"}),e.jsx("div",{style:{paddingLeft:"10px"},children:e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx(x,{level:5,children:"Data Ayah"}),e.jsxs("div",{style:{paddingLeft:"20px"},children:[e.jsx(l,{label:"Nama Ayah",value:t.ayah_nama}),e.jsx(l,{label:"NIK Ayah",value:t.ayah_nik}),e.jsx(l,{label:"Tempat Lahir",value:t.ayah_tempat_lahir}),e.jsx(l,{label:"Tanggal Lahir",value:m(t.ayah_tanggal_lahir)}),e.jsx(l,{label:"Pendidikan",value:t.ayah_pendidikan}),e.jsx(l,{label:"Pekerjaan",value:t.ayah_pekerjaan}),e.jsx(l,{label:"No. Telepon",value:t.ayah_no_tlp})]})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx(x,{level:5,children:"Data Ibu"}),e.jsxs("div",{style:{paddingLeft:"20px"},children:[e.jsx(l,{label:"Nama Ibu",value:t.ibu_nama}),e.jsx(l,{label:"NIK Ibu",value:t.ibu_nik}),e.jsx(l,{label:"Tempat Lahir",value:t.ibu_tempat_lahir}),e.jsx(l,{label:"Tanggal Lahir",value:m(t.ibu_tanggal_lahir)}),e.jsx(l,{label:"Pendidikan",value:t.ibu_pendidikan}),e.jsx(l,{label:"Pekerjaan",value:t.ibu_pekerjaan}),e.jsx(l,{label:"No. Telepon",value:t.ibu_no_tlp})]})]})]})})]}),e.jsx(b,{}),e.jsxs("div",{className:"section-content section-avoid-break",children:[e.jsx(x,{level:4,children:"D. DATA ALAMAT"}),e.jsxs("div",{style:{paddingLeft:"10px"},children:[e.jsx(l,{label:"Alamat",value:a==null?void 0:a.alamat}),e.jsx(l,{label:"Desa/Kelurahan",value:a==null?void 0:a.desa}),e.jsx(l,{label:"Kecamatan",value:a==null?void 0:a.kecamatan}),e.jsx(l,{label:"Kota/Kabupaten",value:a==null?void 0:a.kota}),e.jsx(l,{label:"Provinsi",value:a==null?void 0:a.provinsi}),e.jsx(l,{label:"Kode Pos",value:a==null?void 0:a.kode_pos}),e.jsx(l,{label:"Jarak ke Sekolah",value:`${a==null?void 0:a.jarak} km`}),e.jsx(l,{label:"Transportasi",value:a==null?void 0:a.transportasi})]})]}),e.jsx(b,{}),e.jsxs("div",{className:"section-content section-avoid-break",children:[e.jsx(x,{level:4,children:"E. DATA SEKOLAH ASAL"}),e.jsxs("div",{style:{paddingLeft:"10px"},children:[e.jsx(l,{label:"Nama Sekolah",value:i==null?void 0:i.nama}),e.jsx(l,{label:"NPSN",value:i==null?void 0:i.npsn}),e.jsx(l,{label:"Desa/Kelurahan",value:i==null?void 0:i.desa}),e.jsx(l,{label:"Kecamatan",value:i==null?void 0:i.kecamatan}),e.jsx(l,{label:"Kota/Kabupaten",value:i==null?void 0:i.kota}),e.jsx(l,{label:"Provinsi",value:i==null?void 0:i.provinsi})]})]})]})]})]})},{Title:z,Text:y}=u,_=o=>({__html:o}),O=()=>{const{userId:o}=I(),c=o,{data:d,isLoading:t,error:a}=B(c),i=()=>{const r=document.getElementById("answer-pdf-content"),s={margin:.5,filename:"Jawaban-Kuisioner.pdf",image:{type:"png",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}};N().set(s).from(r).save()};return t?e.jsx("div",{children:"Loading..."}):a?e.jsx("div",{style:{textAlign:"left"},children:"Gagal memuat jawaban."}):e.jsxs(e.Fragment,{children:[e.jsx(v,{style:{float:"right",marginBottom:16},onClick:i,type:"primary",icon:e.jsx(K,{}),children:"Export ke PDF"}),e.jsxs("div",{id:"answer-pdf-content",style:{maxWidth:700,margin:"0 auto",textAlign:"left"},children:[e.jsx(z,{level:4,style:{textAlign:"left"},children:"Jawaban Kuisioner/Anket"}),!d||d.length===0?e.jsx(y,{children:"Tidak ada jawaban yang ditemukan."}):e.jsx(R,{dataSource:d,renderItem:r=>e.jsx(g,{style:{marginBottom:16},styles:{body:{padding:16}},children:e.jsxs("div",{children:[e.jsx(y,{strong:!0,children:"Pertanyaan:"}),e.jsx("div",{style:{marginBottom:8},children:e.jsx("div",{dangerouslySetInnerHTML:_(r.soal)})}),e.jsx(y,{strong:!0,children:"Jawaban:"}),e.jsx("div",{children:e.jsx("div",{dangerouslySetInnerHTML:_(r.jawaban)})})]})})})]})]})},{Title:A}=u,Y=()=>{const o=F(),{userId:c}=I(),{data:d,isLoading:t}=T(c);if(t)return e.jsx(L,{});if(!d)return e.jsx(f,{children:e.jsx(j,{direction:"vertical",size:"large",style:{width:"100%"},children:e.jsx(A,{level:4,type:"danger",children:"Data tidak ditemukan"})})});const{formulir:a,documents:i,address:r,school:s,families:m}=d;return e.jsx(f,{title:`Detail Pendaftar ${a.nama}`,children:e.jsxs(j,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsx(g,{children:e.jsxs(j,{direction:"vertical",size:"middle",style:{width:"100%"},children:[e.jsx(A,{level:4,children:"Detail Pendaftar"}),e.jsx(C,{defaultActiveKey:"1",items:[{key:"1",label:"Data Diri",children:e.jsxs(n,{bordered:!0,children:[e.jsx(n.Item,{label:"Kode Pendaftaran",span:3,children:a.kode_pendaftaran}),e.jsx(n.Item,{label:"Status Pendaftaran",span:3,children:a.status_pendaftaran}),e.jsx(n.Item,{label:"Nama",span:3,children:a.nama}),e.jsx(n.Item,{label:"NISN",children:a.nisn}),e.jsx(n.Item,{label:"NIK",children:a.nik}),e.jsx(n.Item,{label:"No. KK",children:a.no_kk}),e.jsx(n.Item,{label:"No. Akta",children:a.no_akta}),e.jsx(n.Item,{label:"Tempat Lahir",children:a.tempat_lahir}),e.jsx(n.Item,{label:"Tanggal Lahir",children:new Date(a.tanggal_lahir).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})}),e.jsx(n.Item,{label:"Jenis Kelamin",children:a.kelamin=="m"?"Laki-laki":"Perempuan"}),e.jsx(n.Item,{label:"Agama",children:a.agama}),e.jsx(n.Item,{label:"Anak Ke",children:a.anak_ke}),e.jsx(n.Item,{label:"Jumlah Saudara",children:a.jml_saudara}),e.jsxs(n.Item,{label:"Tinggi Badan",children:[a.tinggi," cm"]}),e.jsxs(n.Item,{label:"Berat Badan",children:[a.berat," kg"]}),e.jsxs(n.Item,{label:"Lingkar Kepala",children:[a.kepala," cm"]})]})},{key:"2",label:"Data Orang Tua",children:e.jsxs(n,{bordered:!0,children:[e.jsx(n.Item,{label:"Nama Ayah",span:3,children:a.ayah_nama}),e.jsx(n.Item,{label:"NIK Ayah",children:a.ayah_nik}),e.jsx(n.Item,{label:"Tempat Lahir Ayah",children:a.ayah_tempat_lahir}),e.jsx(n.Item,{label:"Tanggal Lahir Ayah",children:new Date(a.ayah_tanggal_lahir).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})}),e.jsx(n.Item,{label:"Pendidikan Ayah"}),e.jsx(n.Item,{label:"Pekerjaan Ayah",children:a.ayah_pekerjaan}),e.jsx(n.Item,{label:"No. Telepon Ayah",children:a.ayah_no_tlp}),e.jsx(n.Item,{label:"Nama Ibu",span:3,children:a.ibu_nama}),e.jsx(n.Item,{label:"NIK Ibu",children:a.ibu_nik}),e.jsx(n.Item,{label:"Tempat Lahir Ibu",children:a.ibu_tempat_lahir}),e.jsx(n.Item,{label:"Tanggal Lahir Ibu",children:new Date(a.ibu_tanggal_lahir).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})}),e.jsx(n.Item,{label:"Pendidikan Ibu",children:a.ibu_pendidikan}),e.jsx(n.Item,{label:"Pekerjaan Ibu",children:a.ibu_pekerjaan}),e.jsx(n.Item,{label:"No. Telepon Ibu",children:a.ibu_no_tlp})]})},{key:"3",label:"Data Alamat",children:r&&e.jsxs(n,{bordered:!0,children:[e.jsx(n.Item,{label:"Alamat",span:3,children:r.alamat}),e.jsx(n.Item,{label:"Desa/Kelurahan",children:r.desa}),e.jsx(n.Item,{label:"Kecamatan",children:r.kecamatan}),e.jsx(n.Item,{label:"Kota/Kabupaten",children:r.kota}),e.jsx(n.Item,{label:"Provinsi",children:r.provinsi}),e.jsx(n.Item,{label:"Kode Pos",children:r.kode_pos}),e.jsxs(n.Item,{label:"Jarak ke Sekolah",children:[r.jarak," km"]}),e.jsx(n.Item,{label:"Transportasi",children:r.transportasi})]})},{key:"4",label:"Asal Sekolah",children:s&&e.jsxs(n,{bordered:!0,children:[e.jsx(n.Item,{label:"Nama Sekolah",span:3,children:s.nama}),e.jsx(n.Item,{label:"NPSN",children:s.npsn}),e.jsx(n.Item,{label:"Desa/Kelurahan",children:s.desa}),e.jsx(n.Item,{label:"Kecamatan",children:s.kecamatan}),e.jsx(n.Item,{label:"Kota/Kabupaten",children:s.kota}),e.jsx(n.Item,{label:"Provinsi",children:s.provinsi})]})},{key:"5",label:"Data Keluarga",children:m&&m.length>0?e.jsx(j,{direction:"vertical",style:{width:"100%"},children:m.map(l=>e.jsx(g,{size:"small",children:e.jsxs(n,{bordered:!0,children:[e.jsx(n.Item,{label:"Nama",children:l.nama}),e.jsx(n.Item,{label:"Tanggal Lahir",children:new Date(l.tanggal_lahir).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})})]})},`family-${l.id}`))}):e.jsx(u.Text,{children:"Belum ada data keluarga"})},{key:"6",label:"Berkas",children:e.jsx(j,{direction:"vertical",size:"middle",style:{width:"100%"},children:i==null?void 0:i.map(l=>e.jsx(g,{size:"small",children:e.jsxs(j,{children:[e.jsx(u.Text,{strong:!0,children:l.file_name}),e.jsx(v,{type:"link",href:l.file_link,target:"_blank",rel:"noopener noreferrer",children:"Lihat Berkas"})]})},`doc-${l.id}`))})},{key:"7",label:"Print",children:e.jsx(J,{})},{key:"8",label:"Jawaban",children:e.jsx(O,{})}]})]})}),e.jsx(v,{onClick:()=>o(-1),children:"Kembali"})]})})};export{Y as default};
